<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú–∞—Ä–æ—á–Ω–æ–≥–æ –∑–∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Inter',sans-serif;background: radial-gradient(circle at 20% 20%, #1b2233 0%, #0b0e14 40%, #05070c 100%);color:#e9edf7;display:flex;flex-direction:column;min-height:100vh;}

/* -------------------- –ü–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -------------------- */
.menu{
  display:flex;flex-direction:column;width:140px;background:rgba(30,35,50,0.95);padding:20px 0;border-right:1px solid rgba(255,255,255,0.08);
  position:fixed;height:100vh;z-index:100;border-radius:0 12px 12px 0;box-shadow:2px 0 10px rgba(0,0,0,0.4);transition:width 0.3s;
}
.menu.collapsed{width:60px;}
.menu button{
  display:flex;align-items:center;justify-content:flex-start;background:none;border:none;color:#aaa;font-weight:600;font-size:14px;margin:10px 0;padding:12px 16px;border-radius:12px;cursor:pointer;transition:0.3s;
}
.menu button i{margin-right:10px;}
.menu.collapsed button span{display:none;}
.menu button.active{color:#fff;background:rgba(100,150,255,0.25);}
.menu .toggle-btn{margin-bottom:20px;font-size:18px;color:#888;border:none;padding:12px 16px;border-radius:12px;cursor:pointer;transition:0.3s;}
.menu .toggle-btn:hover{color:#fff;background:rgba(100,150,255,0.2);}

/* -------------------- –°—Ç—Ä–∞–Ω–∏—Ü—ã -------------------- */
.page{display:none;padding:20px;padding-bottom:100px;margin-left:140px;flex:1;}
.page.active{display:block;}
@media (max-width:480px){
  .menu{position:fixed;width:60px;}
  .page{margin-left:60px;padding:15px;}
}

/* -------------------- –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -------------------- */
.review-container{max-width:1000px;width:100%;margin:auto;padding:20px;background:rgba(18,22,30,0.85);backdrop-filter:blur(20px);border-radius:24px;box-shadow:0 0 60px rgba(0,0,0,0.7);transition:all 0.4s ease;overflow-x:hidden;}
.top{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap;}
.cover-wrapper{position:relative;cursor:pointer;}
.cover{width:120px;height:120px;border-radius:16px;background:linear-gradient(145deg,#1c2230,#11141b);object-fit:cover;box-shadow:0 0 20px rgba(0,0,0,0.6);transition:all 0.4s ease;}
.meta{flex:1;display:flex;flex-direction:column;gap:8px;}
.meta input{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);padding:10px;border-radius:12px;color:#fff;font-size:14px;}

/* -------------------- –ù–æ–º–∏–Ω–∞—Ü–∏–∏ -------------------- */
.award-container{display:grid;grid-template-columns:repeat(2, 1fr);gap:8px;margin-top:8px;}
.award{display:flex;align-items:center;gap:5px;font-size:12px;cursor:pointer;}
.award input{appearance:none;width:14px;height:14px;border-radius:50%;border:1px solid #555;background:#555;cursor:pointer;box-shadow:0 0 2px rgba(0,0,0,0.2);transition:0.2s;}
.award input:checked{background:#fff;box-shadow:0 0 10px #fff;}
.badge{background:rgba(100,150,255,0.2);color:#fff;font-size:10px;font-weight:600;padding:2px 6px;border-radius:8px;display:inline-block;}

/* -------------------- –ë–ª–æ–∫–∏ -------------------- */
.block{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.05);border-radius:18px;padding:15px;margin-bottom:12px;box-shadow:0 0 15px rgba(0,0,0,0.4);overflow-x:hidden;transition:all 0.4s ease;}
.block.vibe{background:linear-gradient(90deg, rgba(120,60,255,0.15), rgba(255,60,180,0.1));border:1px solid rgba(160,90,255,0.4);}
.label{display:flex;justify-content:space-between;margin-bottom:8px;font-weight:500;}

/* -------------------- –°–ª–∞–π–¥–µ—Ä—ã -------------------- */
input[type=range]{-webkit-appearance:none;width:100%;height:8px;border-radius:4px;background: rgba(255,255,255,0.2);outline:none;box-shadow:0 0 4px rgba(255,255,255,0.3);transition:background 0.3s;}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:#fff;box-shadow:0 0 8px #fff;cursor:pointer;transition:all 0.3s ease;}
input[type=range]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:#fff;box-shadow:0 0 8px #fff;cursor:pointer;transition:all 0.3s ease;}

/* -------------------- –†–µ–∑—É–ª—å—Ç–∞—Ç -------------------- */
.result{text-align:right;margin-top:15px;font-size:36px;font-weight:700;}
.result .small{font-size:14px;opacity:0.5;}

/* -------------------- TEXTAREA -------------------- */
textarea{width:100%;margin-top:10px;padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.04);color:#fff;min-height:100px;resize:none;overflow:auto;}

/* -------------------- BUTTONS -------------------- */
.save-btn{margin-top:12px;padding:10px 18px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:12px;color:#fff;font-weight:600;cursor:pointer;transition:0.3s;}
.save-btn:hover{background:rgba(255,255,255,0.1);}
#editBtn,#deleteBtn{margin-top:12px;padding:10px 18px;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:0.3s;}
#editBtn{background:rgba(100,150,255,0.2);color:#fff;}
#editBtn:hover{background:rgba(100,150,255,0.3);}
#deleteBtn{background:rgba(255,50,50,0.2);color:#fff;margin-left:10px;}
#deleteBtn:hover{background:rgba(255,50,50,0.3);}

/* -------------------- –ö–ê–†–¢–û–ß–ö–ò -------------------- */
.card{background:rgba(18,22,30,0.85);border-radius:18px;padding:12px 16px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.05);display:flex;align-items:center;gap:10px;cursor:pointer;transition:all 0.3s ease;}
.card:hover{transform:scale(1.02);}
.card .rank{width:20px;text-align:center;font-weight:700;color:#fff;}
.card img{width:40px;height:40px;border-radius:6px;object-fit:cover;}
.card .title{font-weight:700;flex:1;}
.card .score{font-size:18px;font-weight:600;margin-left:10px;}
.card .badges{display:flex;gap:5px;margin-left:5px;}
.card .badges span{background:rgba(100,150,255,0.2);color:#fff;font-size:10px;font-weight:600;padding:2px 6px;border-radius:8px;}

/* -------------------- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û -------------------- */
#previewModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:200;opacity:0;pointer-events:none;transition:opacity 0.3s;}
#previewModal.show{opacity:1;pointer-events:auto;}
#previewInner{background: rgba(18,22,30,0.95);padding:20px;border-radius:24px;max-width:90%;width:80%;max-height:90vh;overflow-y:auto;display:flex;flex-direction:column;gap:15px;box-shadow:0 0 60px rgba(0,0,0,0.7);transform:scale(0.8);transition:all 0.4s ease;}
#previewModal.show #previewInner{transform:scale(1);}
#previewInner .review-container{width:100%;}

/* -------------------- –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –£–î–ê–õ–ï–ù–ò–Ø -------------------- */
#confirmModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:300;opacity:0;pointer-events:none;transition:opacity 0.3s;}
#confirmModal.show{opacity:1;pointer-events:auto;}
#confirmInner{background:rgba(30,35,50,0.95);padding:25px;border-radius:24px;max-width:400px;width:90%;text-align:center;box-shadow:0 0 40px rgba(0,0,0,0.7);}
#confirmInner p{margin-bottom:20px;font-size:16px;}
#confirmInner button{padding:10px 20px;border:none;border-radius:12px;margin:0 10px;font-weight:600;cursor:pointer;transition:0.3s;}
#confirmYes{background:rgba(255,50,50,0.2);color:#fff;}
#confirmYes:hover{background:rgba(255,50,50,0.3);}
#confirmNo{background:rgba(100,150,255,0.2);color:#fff;}
#confirmNo:hover{background:rgba(100,150,255,0.3);}

/* -------------------- –ü–†–û–§–ò–õ–¨ -------------------- */
.profile-header{display:flex;align-items:center;gap:10px;margin-bottom:15px;}
.profile-header img{width:60px;height:60px;border-radius:50%;object-fit:cover;}
.profile-header .user-info{display:flex;flex-direction:column;}
.profile-header .user-info .name{font-weight:700;font-size:16px;}
.profile-header .user-info .nick{font-size:14px;opacity:0.6;}
.profile-reviews .card{margin-bottom:10px;}
</style>
</head>
<body>

<!-- -------------------- –ú–µ–Ω—é -------------------- -->
<div class="menu" id="menuPanel">
  <button class="toggle-btn" onclick="toggleMenu()">‚ò∞</button>
  <button onclick="openPage('home', event)" class="active"><i class="fas fa-home"></i><span>–ì–ª–∞–≤–Ω–∞—è</span></button>
  <button onclick="openPage('review', event)"><i class="fas fa-pencil-alt"></i><span>–†–µ—Ü–µ–Ω–∑–∏—è</span></button>
  <button onclick="openPage('profile', event)"><i class="fas fa-user"></i><span>–ü—Ä–æ—Ñ–∏–ª—å</span></button>
</div>

<!-- -------------------- –ì–ª–∞–≤–Ω–∞—è -------------------- -->
<div id="home" class="page active">
  <div class="review-container" id="reviewList"></div>
</div>

<!-- -------------------- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏ -------------------- -->
<div id="review" class="page">
  <div class="review-container">
    <div class="top">
      <div class="cover-wrapper" onclick="coverInput.click()">
        <img id="coverPreview" class="cover">
        <input type="file" id="coverInput" hidden>
      </div>
      <div class="meta">
        <input type="text" id="artist" placeholder="–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å">
        <input type="text" id="album" placeholder="–ê–ª—å–±–æ–º">
        <input type="text" id="author" placeholder="–í–∞—à –Ω–∏–∫">
        <div class="award-container">
          <label class="award"><input type="checkbox" id="a1"> üñº –û–±–ª–æ–∂–∫–∞ –º–µ—Å—è—Ü–∞</label>
          <label class="award"><input type="checkbox" id="a2"> üíø –ê–ª—å–±–æ–º –º–µ—Å—è—Ü–∞</label>
          <label class="award"><input type="checkbox" id="a3"> üé¨ –ö–ª–∏–ø –º–µ—Å—è—Ü–∞</label>
          <label class="award"><input type="checkbox" id="a4"> üèÜ –ê–ª—å–±–æ–º –≥–æ–¥–∞</label>
        </div>
      </div>
    </div>
    <div class="block"><div class="label">–†–∏—Ñ–º—ã / –û–±—Ä–∞–∑—ã <span id="v1">5</span></div><input type="range" min="1" max="10" value="5" id="s1"></div>
    <div class="block"><div class="label">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ / –†–∏—Ç–º–∏–∫–∞ <span id="v2">5</span></div><input type="range" min="1" max="10" value="5" id="s2"></div>
    <div class="block"><div class="label">–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª—è <span id="v3">5</span></div><input type="range" min="1" max="10" value="5" id="s3"></div>
    <div class="block"><div class="label">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å / –•–∞—Ä–∏–∑–º–∞ <span id="v4">5</span></div><input type="range" min="1" max="10" value="5" id="s4"></div>
    <div class="block vibe"><div class="label">–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ / –í–∞–π–± <span id="v5">5</span></div><input type="range" min="1" max="10" value="5" id="s5"></div>
    <div class="result"><span id="total">28</span><span class="small"> / 90</span></div>
    <textarea id="text" placeholder="–¢–µ–∫—Å—Ç —Ä–µ—Ü–µ–Ω–∑–∏–∏"></textarea>
    <button class="save-btn" onclick="saveReview()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é</button>
  </div>
</div>

<!-- -------------------- –ú–æ–¥–∞–ª–∫–∞ -------------------- -->
<div id="previewModal">
  <div id="previewInner">
    <div class="review-container" id="previewContent"></div>
    <div style="display:flex;justify-content:center;">
      <button id="editBtn">–ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é</button>
      <button id="deleteBtn">–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é</button>
    </div>
  </div>
</div>

<!-- -------------------- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è -------------------- -->
<div id="confirmModal">
  <div id="confirmInner">
    <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ä–µ—Ü–µ–Ω–∑–∏—é?</p>
    <button id="confirmYes">–î–∞, —É–¥–∞–ª–∏—Ç—å</button>
    <button id="confirmNo">–û—Ç–º–µ–Ω–∞</button>
  </div>
</div>

<!-- -------------------- –ü—Ä–æ—Ñ–∏–ª—å -------------------- -->
<div id="profile" class="page">
  <div class="review-container">
    <div class="profile-header">
      <img src="https://via.placeholder.com/60" alt="–ê–≤–∞—Ç–∞—Ä">
      <div class="user-info">
        <div class="name" id="profileName">–ò–º—è</div>
        <div class="nick" id="profileNick">@–Ω–∏–∫–Ω–µ–π–º</div>
      </div>
    </div>
    <div class="profile-reviews" id="profileReviews"></div>
  </div>
</div>

<!-- -------------------- JS -------------------- -->
<script>
let editingIndex=null;

// –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–Ω–∑–∏–π (–¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–∏–Ω–∞–∫–æ–≤–æ)
const reviewsData=[
  {artist:"–ê—Ä—Ç–∏—Å—Ç 1",album:"–ê–ª—å–±–æ–º 1",author:"admin",cover:"",scores:[5,5,5,5,5],total:30,awards:[true,false,false,true],text:"–ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞"},
  {artist:"–ê—Ä—Ç–∏—Å—Ç 2",album:"–ê–ª—å–±–æ–º 2",author:"user",cover:"",scores:[6,7,5,4,5],total:50,awards:[false,false,false,false],text:"–ï—â–µ —Ç–µ–∫—Å—Ç"},
];

// -------------------- –°–ª–∞–π–¥–µ—Ä—ã --------------------
const vibeMultipliers={1:1,2:1.0675,3:1.1349,4:1.2024,5:1.2699,6:1.3373,7:1.4048,8:1.4723,9:1.5397,10:1.6072};

function updateScore(){
  let base=0;
  for(let i=1;i<=4;i++){
    let v=parseInt(document.getElementById("s"+i).value);
    document.getElementById("v"+i).innerText=v;
    updateSliderProgress(document.getElementById("s"+i));
    base+=v;
  }
  let vibe=parseInt(document.getElementById("s5").value);
  document.getElementById("v5").innerText=vibe;
  updateSliderProgress(document.getElementById("s5"));
  let final=Math.round((base*1.4)*vibeMultipliers[vibe]);
  document.getElementById("total").innerText=final;
}

function updateSliderProgress(slider){
  let val=(slider.value-slider.min)/(slider.max-slider.min)*100;
  slider.style.background=`linear-gradient(to right, rgba(100,150,255,0.6) 0%, rgba(100,150,255,0.6) ${val}%, rgba(255,255,255,0.2) ${val}%, rgba(255,255,255,0.2) 100%)`;
}
for(let i=1;i<=5;i++)document.getElementById("s"+i).addEventListener("input",updateScore);
updateScore();

// -------------------- –ü–∞–Ω–µ–ª—å --------------------
function toggleMenu(){
  const menu=document.getElementById("menuPanel");
  menu.classList.toggle("collapsed");
  document.querySelectorAll(".page").forEach(p=>{
    p.style.marginLeft=menu.classList.contains("collapsed")?"60px":"140px";
  });
}
function openPage(id,event){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(event) document.querySelectorAll(".menu button").forEach(b=>b.classList.remove("active"));
  if(event) event.currentTarget.classList.add("active");
}

// -------------------- –û–±–ª–æ–∂–∫–∞ --------------------
const coverInput=document.getElementById("coverInput");
coverInput.addEventListener("change", function(e){
  const reader=new FileReader();
  reader.onload=function(){ document.getElementById("coverPreview").src=reader.result; }
  reader.readAsDataURL(e.target.files[0]);
});

// -------------------- –†–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ --------------------
function renderTopReviews(){
  const list=document.getElementById("reviewList");
  list.innerHTML="";
  reviewsData.forEach((r,i)=>{
    const card=document.createElement("div");
    card.className="card";
    let badges=r.awards.map((a,j)=>{
      const labels=["üñº –û–±–ª–æ–∂–∫–∞ –º–µ—Å—è—Ü–∞","üíø –ê–ª—å–±–æ–º –º–µ—Å—è—Ü–∞","üé¨ –ö–ª–∏–ø –º–µ—Å—è—Ü–∞","üèÜ –ê–ª—å–±–æ–º –≥–æ–¥–∞"];
      return a?`<span class="badge">${labels[j]}</span>`:"";
    }).join('') || '<span class="badge">–ù–µ—Ç –Ω–æ–º–∏–Ω–∞—Ü–∏–π</span>';
    card.dataset.index=i;
    card.innerHTML=`<div class="rank">${i+1}</div>${r.cover?`<img src="${r.cover}">`:""}<span class="title">${r.artist||"–ù–µ —É–∫–∞–∑–∞–Ω"} ‚Äî ${r.album||"–ù–µ —É–∫–∞–∑–∞–Ω"}</span><div class="badges">${badges}</div><span class="score">${r.total}</span>`;
    card.onclick=()=>showPreview(i);
    list.appendChild(card);
  });
}

// -------------------- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏ --------------------
function saveReview(){
  const review={
    artist:document.getElementById("artist").value,
    album:document.getElementById("album").value,
    author:document.getElementById("author").value || "anon",
    cover:document.getElementById("coverPreview").src || "",
    scores:[...Array(5)].map((_,i)=>parseInt(document.getElementById("s"+(i+1)).value)),
    text:document.getElementById("text").value,
    total:parseInt(document.getElementById("total").innerText),
    awards:[...document.querySelectorAll(".award input")].map(inp=>inp.checked)
  };
  reviewsData.push(review);
  renderTopReviews();
  resetReviewForm();
  openPage('home');
}
function resetReviewForm(){
  document.getElementById("artist").value="";
  document.getElementById("album").value="";
  document.getElementById("author").value="";
  document.getElementById("coverPreview").src="";
  document.getElementById("text").value="";
  for(let i=1;i<=5;i++){document.getElementById("s"+i).value=5;updateSliderProgress(document.getElementById("s"+i));}
  document.querySelectorAll(".award input").forEach(inp=>inp.checked=false);
  updateScore();
}

// -------------------- –ú–æ–¥–∞–ª–∫–∞ --------------------
const previewModal=document.getElementById("previewModal");
const previewContent=document.getElementById("previewContent");
const editBtn=document.getElementById("editBtn");
const deleteBtn=document.getElementById("deleteBtn");
let previewIndex=null;

function showPreview(index){
  const r=reviewsData[index];
  previewIndex=index;
  previewContent.innerHTML=`<div class="top">
      <div class="cover-wrapper"><img class="cover" src="${r.cover||''}"></div>
      <div class="meta">
        <input type="text" value="${r.artist||'–ù–µ —É–∫–∞–∑–∞–Ω'}" disabled>
        <input type="text" value="${r.album||'–ù–µ —É–∫–∞–∑–∞–Ω'}" disabled>
        <input type="text" value="–ê–≤—Ç–æ—Ä: ${r.author}" disabled>
        <div class="award-container">
          ${r.awards.map((a,j)=>{
            const labels=["üñº –û–±–ª–æ–∂–∫–∞ –º–µ—Å—è—Ü–∞","üíø –ê–ª—å–±–æ–º –º–µ—Å—è—Ü–∞","üé¨ –ö–ª–∏–ø –º–µ—Å—è—Ü–∞","üèÜ –ê–ª—å–±–æ–º –≥–æ–¥–∞"];
            return a?`<label class="award"><input type="checkbox" checked disabled> ${labels[j]}</label>`:"";
          }).join('') || '<span class="badge">–ù–µ—Ç –Ω–æ–º–∏–Ω–∞—Ü–∏–π</span>'}
        </div>
      </div>
    </div>
    ${r.scores.map((s,i)=>`<div class="block ${i===4?'vibe':''}"><div class="label">${["–†–∏—Ñ–º—ã / –û–±—Ä–∞–∑—ã","–°—Ç—Ä—É–∫—Ç—É—Ä–∞ / –†–∏—Ç–º–∏–∫–∞","–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∏–ª—è","–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ—Å—Ç—å / –•–∞—Ä–∏–∑–º–∞","–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ / –í–∞–π–±"][i]} <span>${s}</span></div></div>`).join('')}
    <div class="result"><span>${r.total}</span><span class="small"> / 90</span></div>
    <textarea disabled>${r.text}</textarea>`;
  previewModal.classList.add('show');
}

editBtn.onclick=()=>{
  previewModal.classList.remove('show');
  const r=reviewsData[previewIndex];
  document.getElementById("artist").value=r.artist;
  document.getElementById("album").value=r.album;
  document.getElementById("author").value=r.author;
  document.getElementById("coverPreview").src=r.cover;
  document.getElementById("text").value=r.text;
  r.scores.forEach((val,i)=>{
    const slider=document.getElementById("s"+(i+1));
    slider.value=val;
    updateSliderProgress(slider);
  });
  document.querySelectorAll(".award input").forEach((inp,i)=>inp.checked=r.awards[i]);
  updateScore();
  openPage('review');
}

deleteBtn.onclick=()=>{
  if(confirm("–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é?")){
    reviewsData.splice(previewIndex,1);
    renderTopReviews();
    previewModal.classList.remove('show');
  }
}

previewModal.addEventListener('click', e=>{if(e.target===previewModal) previewModal.classList.remove('show');});
document.getElementById("confirmNo").onclick=()=>document.getElementById("confirmModal").classList.remove('show');

// -------------------- –û–±–ª–æ–∂–∫–∞ --------------------
coverInput.addEventListener("change", e=>{
  const reader=new FileReader();
  reader.onload=()=>document.getElementById("coverPreview").src=reader.result;
  reader.readAsDataURL(e.target.files[0]);
});

renderTopReviews();
</script>
</body>
</html>
